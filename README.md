# Device Tree for OnePlus 7 Pro (guacamole)

The OnePlus 7 Pro (codenamed _"guacamole"_) is a flagship smartphone from OnePlus.
It was released in May 2019.
# device info
(bootloader) hw-revision:20002
(bootloader) unlocked:no
(bootloader) off-mode-charge:1
(bootloader) charger-screen-enabled:1
(bootloader) battery-soc-ok:yes
(bootloader) battery-voltage:4206
(bootloader) version-baseband:
(bootloader) version-bootloader:
(bootloader) erase-block-size: 0x1000
(bootloader) logical-block-size: 0x1000
(bootloader) variant:SDM UFS
(bootloader) partition-type:mdm1m9kefsc:raw
(bootloader) partition-size:mdm1m9kefsc: 0x1000
(bootloader) partition-type:mdm1m9kefs2:raw
(bootloader) partition-size:mdm1m9kefs2: 0x100000
(bootloader) partition-type:mdm1m9kefs1:raw
(bootloader) partition-size:mdm1m9kefs1: 0x100000
(bootloader) partition-type:mdm1m9kefs3:raw
(bootloader) partition-size:mdm1m9kefs3: 0x100000
(bootloader) partition-type:fsc:raw
(bootloader) partition-size:fsc: 0x20000
(bootloader) partition-type:fsg:raw
(bootloader) partition-size:fsg: 0x200000
(bootloader) partition-type:modemst2:raw
(bootloader) partition-size:modemst2: 0x200000
(bootloader) partition-type:modemst1:raw
(bootloader) partition-size:modemst1: 0x200000
(bootloader) partition-type:ALIGN_TO_128K_2:raw
(bootloader) partition-size:ALIGN_TO_128K_2: 0x1A000
(bootloader) partition-type:storsec_b:raw
(bootloader) partition-size:storsec_b: 0x20000
(bootloader) partition-type:mdm1oemnvbktmp:raw
(bootloader) partition-size:mdm1oemnvbktmp: 0x100000
(bootloader) partition-type:reserve4:raw
(bootloader) partition-size:reserve4: 0xFD0000
(bootloader) partition-type:reserve3:raw
(bootloader) partition-size:reserve3: 0xFD0000
(bootloader) partition-type:reserve2:raw
(bootloader) partition-size:reserve2: 0xFD0000
(bootloader) partition-type:reserve1:raw
(bootloader) partition-size:reserve1: 0x7E8000
(bootloader) partition-type:catecontentfv:raw
(bootloader) partition-size:catecontentfv: 0x100000
(bootloader) partition-type:catefv:raw
(bootloader) partition-size:catefv: 0x80000
(bootloader) partition-type:secdata:raw
(bootloader) partition-size:secdata: 0x7000
(bootloader) partition-type:uefivarstore:raw
(bootloader) partition-size:uefivarstore: 0x80000
(bootloader) partition-type:storsec_a:raw
(bootloader) partition-size:storsec_a: 0x20000
(bootloader) partition-type:logdump:raw
(bootloader) partition-size:logdump: 0x4000000
(bootloader) partition-type:cateloader:raw
(bootloader) partition-size:cateloader: 0x200000
(bootloader) partition-type:logfs:raw
(bootloader) partition-size:logfs: 0x800000
(bootloader) partition-type:toolsfv:raw
(bootloader) partition-size:toolsfv: 0x100000
(bootloader) partition-type:limits:raw
(bootloader) partition-size:limits: 0x1000
(bootloader) partition-type:splash:raw
(bootloader) partition-size:splash: 0x20A4000
(bootloader) partition-type:spunvm:raw
(bootloader) partition-size:spunvm: 0x800000
(bootloader) partition-type:msadp:raw
(bootloader) partition-size:msadp: 0x40000
(bootloader) partition-type:apdp:raw
(bootloader) partition-size:apdp: 0x40000
(bootloader) partition-type:dip:raw
(bootloader) partition-size:dip: 0x100000
(bootloader) partition-type:devinfo:raw
(bootloader) partition-size:devinfo: 0x1000
(bootloader) partition-type:op1:raw
(bootloader) partition-size:op1: 0x12C00000
(bootloader) partition-type:aging_mod:raw
(bootloader) partition-size:aging_mod: 0x2000000
(bootloader) partition-type:aging:raw
(bootloader) partition-size:aging: 0x4000000
(bootloader) partition-type:multiimgoem_b:raw
(bootloader) partition-size:multiimgoem_b: 0x8000
(bootloader) partition-type:fw_ufs5_b:raw
(bootloader) partition-size:fw_ufs5_b: 0x200000
(bootloader) partition-type:fw_ufs4_b:raw
(bootloader) partition-size:fw_ufs4_b: 0x200000
(bootloader) partition-type:fw_ufs3_b:raw
(bootloader) partition-size:fw_ufs3_b: 0x200000
(bootloader) partition-type:fw_ufs2_b:raw
(bootloader) partition-size:fw_ufs2_b: 0x200000
(bootloader) partition-type:fw_ufs1_b:raw
(bootloader) partition-size:fw_ufs1_b: 0x200000
(bootloader) partition-type:LOGO_b:raw
(bootloader) partition-size:LOGO_b: 0x1000000
(bootloader) partition-type:imagefv_b:raw
(bootloader) partition-size:imagefv_b: 0x200000
(bootloader) partition-type:uefisecapp_b:raw
(bootloader) partition-size:uefisecapp_b: 0x200000
(bootloader) partition-type:dtbo_b:raw
(bootloader) partition-size:dtbo_b: 0x1800000
(bootloader) partition-type:vbmeta_b:raw
(bootloader) partition-size:vbmeta_b: 0x10000
(bootloader) partition-type:vendor_b:raw
(bootloader) partition-size:vendor_b: 0x40000000
(bootloader) partition-type:qupfw_b:raw
(bootloader) partition-size:qupfw_b: 0x14000
(bootloader) partition-type:devcfg_b:raw
(bootloader) partition-size:devcfg_b: 0x20000
(bootloader) partition-type:cmnlib64_b:raw
(bootloader) partition-size:cmnlib64_b: 0x80000
(bootloader) partition-type:cmnlib_b:raw
(bootloader) partition-size:cmnlib_b: 0x80000
(bootloader) partition-type:boot_b:raw
(bootloader) partition-size:boot_b: 0x6000000
(bootloader) partition-type:keymaster_b:raw
(bootloader) partition-size:keymaster_b: 0x80000
(bootloader) partition-type:dsp_b:raw
(bootloader) partition-size:dsp_b: 0x4000000
(bootloader) partition-type:abl_b:raw
(bootloader) partition-size:abl_b: 0x800000
(bootloader) partition-type:mdtp_b:raw
(bootloader) partition-size:mdtp_b: 0x2000000
(bootloader) partition-type:mdtpsecapp_b:raw
(bootloader) partition-size:mdtpsecapp_b: 0x400000
(bootloader) partition-type:bluetooth_b:raw
(bootloader) partition-size:bluetooth_b: 0x100000
(bootloader) partition-type:modem_b:raw
(bootloader) partition-size:modem_b: 0x12C00000
(bootloader) partition-type:hyp_b:raw
(bootloader) partition-size:hyp_b: 0x800000
(bootloader) partition-type:tz_b:raw
(bootloader) partition-size:tz_b: 0x400000
(bootloader) partition-type:aop_b:raw
(bootloader) partition-size:aop_b: 0x80000
(bootloader) partition-type:multiimgoem_a:raw
(bootloader) partition-size:multiimgoem_a: 0x8000
(bootloader) partition-type:fw_ufs5_a:raw
(bootloader) partition-size:fw_ufs5_a: 0x200000
(bootloader) partition-type:fw_ufs4_a:raw
(bootloader) partition-size:fw_ufs4_a: 0x200000
(bootloader) partition-type:fw_ufs3_a:raw
(bootloader) partition-size:fw_ufs3_a: 0x200000
(bootloader) partition-type:fw_ufs2_a:raw
(bootloader) partition-size:fw_ufs2_a: 0x200000
(bootloader) partition-type:fw_ufs1_a:raw
(bootloader) partition-size:fw_ufs1_a: 0x200000
(bootloader) partition-type:LOGO_a:raw
(bootloader) partition-size:LOGO_a: 0x1000000
(bootloader) partition-type:core_nhlos_a:raw
(bootloader) partition-size:core_nhlos_a: 0xAA00000
(bootloader) partition-type:imagefv_a:raw
(bootloader) partition-size:imagefv_a: 0x200000
(bootloader) partition-type:uefisecapp_a:raw
(bootloader) partition-size:uefisecapp_a: 0x200000
(bootloader) partition-type:dtbo_a:raw
(bootloader) partition-size:dtbo_a: 0x1800000
(bootloader) partition-type:vbmeta_a:raw
(bootloader) partition-size:vbmeta_a: 0x10000
(bootloader) partition-type:vendor_a:raw
(bootloader) partition-size:vendor_a: 0x40000000
(bootloader) partition-type:qupfw_a:raw
(bootloader) partition-size:qupfw_a: 0x14000
(bootloader) partition-type:devcfg_a:raw
(bootloader) partition-size:devcfg_a: 0x20000
(bootloader) partition-type:cmnlib64_a:raw
(bootloader) partition-size:cmnlib64_a: 0x80000
(bootloader) partition-type:cmnlib_a:raw
(bootloader) partition-size:cmnlib_a: 0x80000
(bootloader) partition-type:boot_a:raw
(bootloader) partition-size:boot_a: 0x6000000
(bootloader) partition-type:keymaster_a:raw
(bootloader) partition-size:keymaster_a: 0x80000
(bootloader) partition-type:dsp_a:raw
(bootloader) partition-size:dsp_a: 0x4000000
(bootloader) partition-type:abl_a:raw
(bootloader) partition-size:abl_a: 0x800000
(bootloader) partition-type:mdtp_a:raw
(bootloader) partition-size:mdtp_a: 0x2000000
(bootloader) partition-type:mdtpsecapp_a:raw
(bootloader) partition-size:mdtpsecapp_a: 0x400000
(bootloader) partition-type:bluetooth_a:raw
(bootloader) partition-size:bluetooth_a: 0x100000
(bootloader) partition-type:modem_a:raw
(bootloader) partition-size:modem_a: 0x12C00000
(bootloader) partition-type:hyp_a:raw
(bootloader) partition-size:hyp_a: 0x800000
(bootloader) partition-type:tz_a:raw
(bootloader) partition-size:tz_a: 0x400000
(bootloader) partition-type:aop_a:raw
(bootloader) partition-size:aop_a: 0x80000
(bootloader) partition-type:mdmddr:raw
(bootloader) partition-size:mdmddr: 0x100000
(bootloader) partition-type:ddr:raw
(bootloader) partition-size:ddr: 0x100000
(bootloader) partition-type:cdt:raw
(bootloader) partition-size:cdt: 0x20000
(bootloader) partition-type:ALIGN_TO_128K_1:raw
(bootloader) partition-size:ALIGN_TO_128K_1: 0x1A000
(bootloader) partition-type:xbl_config_b:raw
(bootloader) partition-size:xbl_config_b: 0x20000
(bootloader) partition-type:xbl_b:raw
(bootloader) partition-size:xbl_b: 0x380000
(bootloader) partition-type:xbl_config_a:raw
(bootloader) partition-size:xbl_config_a: 0x20000
(bootloader) partition-type:xbl_a:raw
(bootloader) partition-size:xbl_a: 0x380000
(bootloader) partition-type:userdata:ext4
(bootloader) partition-size:userdata: 0x38B5673000
(bootloader) partition-type:rawdump:raw
(bootloader) partition-size:rawdump: 0x8000000
(bootloader) partition-type:metadata:raw
(bootloader) partition-size:metadata: 0x1000000
(bootloader) partition-type:odm_b:raw
(bootloader) partition-size:odm_b: 0x6400000
(bootloader) partition-type:odm_a:raw
(bootloader) partition-size:odm_a: 0x6400000
(bootloader) partition-type:system_b:ext4
(bootloader) partition-size:system_b: 0xD9000000
(bootloader) partition-type:system_a:ext4
(bootloader) partition-size:system_a: 0xD9000000
(bootloader) partition-type:config:raw
(bootloader) partition-size:config: 0x80000
(bootloader) partition-type:mdm_oem_stanvbk:raw
(bootloader) partition-size:mdm_oem_stanvbk: 0x100000
(bootloader) partition-type:mdm_oem_dycnvbk:raw
(bootloader) partition-size:mdm_oem_dycnvbk: 0x100000
(bootloader) partition-type:oem_stanvbk:raw
(bootloader) partition-size:oem_stanvbk: 0xA00000
(bootloader) partition-type:oem_dycnvbk:raw
(bootloader) partition-size:oem_dycnvbk: 0xA00000
(bootloader) partition-type:op2:raw
(bootloader) partition-size:op2: 0x10000000
(bootloader) partition-type:frp:raw
(bootloader) partition-size:frp: 0x80000
(bootloader) partition-type:keystore:raw
(bootloader) partition-size:keystore: 0x80000
(bootloader) partition-type:param:raw
(bootloader) partition-size:param: 0x100000
(bootloader) partition-type:misc:raw
(bootloader) partition-size:misc: 0x100000
(bootloader) partition-type:persist:raw
(bootloader) partition-size:persist: 0x2000000
(bootloader) partition-type:ssd:raw
(bootloader) partition-size:ssd: 0x2000
(bootloader) has-slot:modem:yes
(bootloader) has-slot:system:yes
(bootloader) current-slot:b
(bootloader) has-slot:boot:yes
(bootloader) slot-retry-count:b:7
(bootloader) slot-unbootable:b:no
(bootloader) slot-successful:b:yes
(bootloader) slot-retry-count:a:7
(bootloader) slot-unbootable:a:no
(bootloader) slot-successful:a:yes
(bootloader) slot-count:2
(bootloader) secure:yes
(bootloader) serialno:########
(bootloader) product:msmnile
(bootloader) max-download-size:805306368
(bootloader) kernel:uefi

1|OnePlus7ProTMO:/ $ cat /proc/filesystems
nodev	sysfs
nodev	rootfs
nodev	ramfs
nodev	bdev
nodev	proc
nodev	cpuset
nodev	cgroup
nodev	cgroup2
nodev	tmpfs
nodev	configfs
nodev	debugfs
nodev	tracefs
nodev	sockfs
nodev	dax
nodev	bpf
nodev	pipefs
nodev	devpts
	ext3
	ext2
	ext4
	vfat
	msdos
nodev	ecryptfs
nodev	sdcardfs
	ntfs
	fuseblk
nodev	fuse
nodev	fusectl
	f2fs
nodev	pstore
	exfat
nodev	selinuxfs
nodev	functionfs
OnePlus7ProTMO:/ $ cd dev/block/platform/soc/1d84000.ufshc/by-name
OnePlus7ProTMO:/dev/block/platform/soc/1d84000.ufshc/by-name $ ls -al
total 0
drwxr-xr-x 2 root root 2360 1970-01-02 10:47 .
drwxr-xr-x 3 root root 2500 1970-01-02 10:47 ..
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 ALIGN_TO_128K_1 -> /dev/block/sdd1
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 ALIGN_TO_128K_2 -> /dev/block/sdf1
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 LOGO_a -> /dev/block/sde22
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 LOGO_b -> /dev/block/sde49
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 abl_a -> /dev/block/sde8
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 abl_b -> /dev/block/sde36
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 aging -> /dev/block/sde56
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 aging_mod -> /dev/block/sde57
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 aop_a -> /dev/block/sde1
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 aop_b -> /dev/block/sde29
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 apdp -> /dev/block/sde61
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 bluetooth_a -> /dev/block/sde5
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 bluetooth_b -> /dev/block/sde33
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 boot_a -> /dev/block/sde11
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 boot_b -> /dev/block/sde39
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 catecontentfv -> /dev/block/sde74
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 catefv -> /dev/block/sde73
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 cateloader -> /dev/block/sde68
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 cdt -> /dev/block/sdd2
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 cmnlib64_a -> /dev/block/sde13
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 cmnlib64_b -> /dev/block/sde41
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 cmnlib_a -> /dev/block/sde12
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 cmnlib_b -> /dev/block/sde40
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 config -> /dev/block/sda12
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 core_nhlos_a -> /dev/block/sde21
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 ddr -> /dev/block/sdd3
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 devcfg_a -> /dev/block/sde14
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 devcfg_b -> /dev/block/sde42
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 devinfo -> /dev/block/sde59
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 dip -> /dev/block/sde60
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 dsp_a -> /dev/block/sde9
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 dsp_b -> /dev/block/sde37
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 dtbo_a -> /dev/block/sde18
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 dtbo_b -> /dev/block/sde46
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 frp -> /dev/block/sda6
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 fsc -> /dev/block/sdf5
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 fsg -> /dev/block/sdf4
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs1_a -> /dev/block/sde23
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs1_b -> /dev/block/sde50
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs2_a -> /dev/block/sde24
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs2_b -> /dev/block/sde51
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs3_a -> /dev/block/sde25
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs3_b -> /dev/block/sde52
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs4_a -> /dev/block/sde26
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs4_b -> /dev/block/sde53
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs5_a -> /dev/block/sde27
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 fw_ufs5_b -> /dev/block/sde54
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 hyp_a -> /dev/block/sde3
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 hyp_b -> /dev/block/sde31
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 imagefv_a -> /dev/block/sde20
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 imagefv_b -> /dev/block/sde48
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 keymaster_a -> /dev/block/sde10
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 keymaster_b -> /dev/block/sde38
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 keystore -> /dev/block/sda5
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 limits -> /dev/block/sde65
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 logdump -> /dev/block/sde69
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 logfs -> /dev/block/sde67
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 mdm1m9kefs1 -> /dev/block/sdf7
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 mdm1m9kefs2 -> /dev/block/sdf8
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 mdm1m9kefs3 -> /dev/block/sdf6
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 mdm1m9kefsc -> /dev/block/sdf9
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 mdm1oemnvbktmp -> /dev/block/sde79
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 mdm_oem_dycnvbk -> /dev/block/sda10
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 mdm_oem_stanvbk -> /dev/block/sda11
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 mdmddr -> /dev/block/sdd4
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 mdtp_a -> /dev/block/sde7
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 mdtp_b -> /dev/block/sde35
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 mdtpsecapp_a -> /dev/block/sde6
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 mdtpsecapp_b -> /dev/block/sde34
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 metadata -> /dev/block/sda17
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 misc -> /dev/block/sda3
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 modem_a -> /dev/block/sde4
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 modem_b -> /dev/block/sde32
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 modemst1 -> /dev/block/sdf2
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 modemst2 -> /dev/block/sdf3
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 msadp -> /dev/block/sde62
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 multiimgoem_a -> /dev/block/sde28
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 multiimgoem_b -> /dev/block/sde55
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 odm_a -> /dev/block/sda15
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 odm_b -> /dev/block/sda16
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 oem_dycnvbk -> /dev/block/sda8
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 oem_stanvbk -> /dev/block/sda9
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 op1 -> /dev/block/sde58
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 op2 -> /dev/block/sda7
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 param -> /dev/block/sda4
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 persist -> /dev/block/sda2
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 qupfw_a -> /dev/block/sde15
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 qupfw_b -> /dev/block/sde43
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 rawdump -> /dev/block/sda18
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 reserve1 -> /dev/block/sde75
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 reserve2 -> /dev/block/sde76
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 reserve3 -> /dev/block/sde77
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 reserve4 -> /dev/block/sde78
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 secdata -> /dev/block/sde72
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 splash -> /dev/block/sde64
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 spunvm -> /dev/block/sde63
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 ssd -> /dev/block/sda1
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 storsec_a -> /dev/block/sde70
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 storsec_b -> /dev/block/sde80
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 system_a -> /dev/block/sda13
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 system_b -> /dev/block/sda14
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 toolsfv -> /dev/block/sde66
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 tz_a -> /dev/block/sde2
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 tz_b -> /dev/block/sde30
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 uefisecapp_a -> /dev/block/sde19
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 uefisecapp_b -> /dev/block/sde47
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 uefivarstore -> /dev/block/sde71
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 userdata -> /dev/block/sda19
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 vbmeta_a -> /dev/block/sde17
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 vbmeta_b -> /dev/block/sde45
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 vendor_a -> /dev/block/sde16
lrwxrwxrwx 1 root root   16 1970-01-02 10:47 vendor_b -> /dev/block/sde44
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 xbl_a -> /dev/block/sdb1
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 xbl_b -> /dev/block/sdc1
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 xbl_config_a -> /dev/block/sdb2
lrwxrwxrwx 1 root root   15 1970-01-02 10:47 xbl_config_b -> /dev/block/sdc2


## Compile

First download omni-9.0 tree:

```
repo init --depth=1 -u https://github.com/omnirom/android.git -b android-9.0
```
Then add these string to .repo/manifests/remove.xml

```
<remove-project name="platform/bootable/recovery" />
```

Then add these projects to .repo/local_manifests/roomservice.xml (If you don't have it, you can add them to .repo/manifest.xml): 

```xml
<project name="mauronofrio/android_device_oneplus_guacamole_TWRP" path="device/oneplus/guacamole" remote="github" revision="android-9.0" />
<project name="mauronofrio/android_bootable_recovery" path="bootable/recovery" remote="github" revision="android-9.0" />
<project name="android_external_busybox" path="external/busybox" remote="TeamWin" revision="android-9.0" />
```

Now you can sync your source:

```
repo sync
```

To auotomatic make the twrp installer, you need to import this commit in the build path: https://gerrit.omnirom.org/#/c/android_build/+/33182/


To make all works you need to modify the buildinfo.sh in build/tools
echo "ro.build.version.release=$PLATFORM_VERSION"
echo "ro.build.version.security_patch=$PLATFORM_SECURITY_PATCH"
to
echo "ro.build.version.release_orig=$PLATFORM_VERSION"
echo "ro.build.version.security_patch_orig=$PLATFORM_SECURITY_PATCH"

And you need to increase the PLATFORM_VERSION to 16.1.0 in build/core/version_defaults.mk to override Google's anti-rollback features (This actually i don't know if is always needed)

Finally execute these:

```
. build/envsetup.sh
export ALLOW_MISSING_DEPENDENCIES=true
export LC_ALL=C
lunch omni_guacamole-eng 
mka adbd recoveryimage 
```

To test it:

```
fastboot boot out/target/product/guacamole/recovery.img
```

Kernel Source: using precompiled kernel
## Credits
I want to say a big thanks to @twinnfamous
